# Example of Project settings
(using_atk_version): 1.0
(project):
    name: The ATK Repo
    description: Blah
    homepage: www.blah.com
    
    auto_generated_commands: &auto_generated_commands !evaluate/ruby |
        commands = {}
        # check for a scripts directory
        script_file_paths = Dir["scripts/*"]
        for each in script_file_paths
            commands[File.basename(each, ".*")] = "./#{each}"
        end
        commands
    
    basic_setup: &basic_setup_reference
        (project_commands): &basic_commands
            # auto-insert the !lang/console if they dont put one
            run: !language/ruby
                puts "hi"
            stop: \`pkill node`
            compile: gcc *.cpp
            # TODO: add inline support for doing things like auto-generating commands
            ? !inline [ *auto_generated_commands ]
        (environment_variables):
            JAVA_VERSION: "8.9"
        (structures):
            npm-package: v1.0.0
            vs-code-package: v1.0.0
            git-repo: v1.0.0
        (dependencies): &base_dependencies
            python3: v3.7.0
            node: v11.11.0
            npm: v6.7.0
            git: v2.21.0
    
    (advanced_setup):
        (local_package_managers): ['npm', 'pip'] # by default the local package managers are always here
        (put_new_dependencies_under): [ '(project)', 'basic_info', '(dependencies)' ]
        <<: *basic_setup_reference # this injects all the (basic_setup) here
        # caveats for a specific OS
        when(--os is 'mac'):
            (dependencies):
                <<: *base_dependencies
                python2: v2.7
            
        when(--os is 'windows'):
            (project_commands):
                <<: *basic_commands 
                show_files: dir # this is a custom command specific to windows
        when(--os is 'linux'):
            # caveats for a specific OS sub-version
            when(--os is 'arch'):
                (project_commands):
                    <<: *basic_commands # this injects all the (project_commands) here
                    my_ip_address: "ip" # this is a custom command specific to arch linux
                    
        # # caveats for a different context
        # when(--context is 'testing'):
        #     (environment_variables):
        #         CMAKE_LIB: "testing"
        #     (project_commands):
        #         run: node tests.rb
            
        #     when(--os is 'windows'):
        #         (environment_variables):
        #             CMAKE_LIB: "C:\\testing"
